## Описание
Cистема для отслеживания проникновения на запрещенную территорию.

Стек: YOLO11, BoostTrack, OpenCV.

Работает как напрямую с видеофайлами, так и с RTSP-потоком. 

![Анимация](https://media4.giphy.com/media/v1.Y2lkPTc5MGI3NjExMmJpdDB1NmdzMTd5a2ljc3hhY2Vnc2V2eDVxYng1MXpoYnV0cTNsNCZlcD12MV9pbnRlcm5hbF9naWZfYnlfaWQmY3Q9Zw/zS67qWiyMop9v9mfoC/giphy.gif)

## Установка окружения

Для запуска требуется менеджер пакетов uv:

```bash
cd path_to_project
uv sync
```

В проекте используется Pytorch для CUDA 12.4. Если у вас стоит другая версия CUDA, то возможно потребуется поставить Pytorch отдельно, если подразумевается использование GPU.

## Запуск

Для начала напишите путь до источника видео VIDEO_SOURCE в config.yaml. Далее:

```bash
cd path_to_project
uv run main.py
```

При запуске откроется окно, в котором будет показан 1 кадр из указанного источника видео. Это процесс разметки запрещенных территорий. Здесь нужно будет строить замкнутые полигоны про помощи нажатия мышкой в нужных местах. Также, в этом режиме доступны специалиные функции:

- Клавиша 'Enter' позволяет быстро закончить разметку данного полигона. При нажатии соединятся первая и последняя точки полигона.
- Клавиша 'c' удаляет последний нарисованный полигон.

При завершении разметки нужно нажать клавишу 'q'. Полигоны будут сохранены в папку proh_areas в виде json-файла с названием restricted_zones.json.

Также, можно напрямую указать путь до изначально подготовленных полигонов с запрещенными зонами PROH_AREAS в config.yaml.

Детектор дообучен на датасете со снимками с камер видеонаблюдения. Рекомендуется использовать веса из папки models для работы "из коробки" или для дообучения на вашу задачу. Для настройки параметров детектора и трекера используйте файлы /tracking/det_cfg.yaml и /tracking/track_cfg.yaml соответственно. 

Для дальнейшего корректного завершения программы нажмите 'q'.